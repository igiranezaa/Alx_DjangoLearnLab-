{% extends 'base.html' %}

{% block content %}
<h2>All Posts</h2>

<!-- ===================== -->
<!--   SEARCH BAR          -->
<!-- ===================== -->
<form method="get" style="margin-bottom: 15px;">
    <input type="text" name="q" placeholder="Search posts..." 
           value="{{ request.GET.q }}" style="padding:5px; width:250px;">
    <button type="submit">Search</button>
</form>

<!-- ===================== -->
<!--   CREATE POST BUTTON  -->
<!-- ===================== -->
{% if user.is_authenticated %}
    <p><a href="{% url 'post-create' %}">➕ Create New Post</a></p>
{% endif %}

<hr>

<!-- ===================== -->
<!--   POST LIST            -->
<!-- ===================== -->
{% if posts %}
    <ul>
        {% for post in posts %}
            <li style="margin-bottom: 25px;">
                
                <!-- Post Title -->
                <h3>
                    <a href="{% url 'post-detail' post.pk %}">
                        {{ post.title }}
                    </a>
                </h3>

                <!-- Post Info -->
                <p>
                    By <strong>{{ post.author }}</strong> — {{ post.published_date }}
                </p>

                <!-- Tags -->
                {% if post.tags.all %}
                    <p>
                        {% for tag in post.tags.all %}
                            <a href="{% url 'posts-by-tag' tag.name %}">
                                #{{ tag.name }}
                            </a>
                            &nbsp;
                        {% endfor %}
                    </p>
                {% endif %}

            </li>
        {% endfor %}
    </ul>
{% else %}
    <p>No posts found.</p>
{% endif %}

{% endblock %}
